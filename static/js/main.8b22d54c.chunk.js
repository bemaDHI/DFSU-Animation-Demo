(this["webpackJsonpmuse-prototype"]=this["webpackJsonpmuse-prototype"]||[]).push([[0],{168:function(e,t){},234:function(e,t){},331:function(e,t,i){},332:function(e,t,i){},334:function(e,t){},363:function(e,t,i){"use strict";i.r(t);var a=i(14),r=i(0),n=i.n(r),s=i(43),o=i.n(s),c=(i(331),i(66)),l=(i(332),i(423)),d=i(436),u=i(285),h=i.n(u),f=i(286),p=i(63),m=i(2),v=i(4),y=i(32),g=i(5),b=i(424),k=i(292),T=i(293),x=new Date(1900,0,0),D=new Date(9999,0,0),w=function(){function e(t,i,a,r,n,s){Object(m.a)(this,e),this.root=t,this.id=void 0,this.locations=void 0,this.ETASeconds=void 0,this.classification=void 0,this._lastObsDateTime=void 0,this._alertLevel=void 0,this.id=i,this._lastObsDateTime=a,this._alertLevel=r,this.locations=s,this.ETASeconds=-1,this.classification=n}return Object(v.a)(e,[{key:"lastObsDateTime",get:function(){return this._lastObsDateTime},set:function(e){this._lastObsDateTime=e}},{key:"alertLevel",get:function(){return this._alertLevel},set:function(e){this._alertLevel=e}},{key:"color",get:function(){switch(this._alertLevel){case"Low":return[141,228,152];case"Medium":return[280,216,138];case"High":return[241,119,119];default:return[77,77,77]}}},{key:"colorStr",get:function(){switch(this._alertLevel){case"Low":return"rgb(81, 168, 92)";case"Medium":return"rgb(240, 176, 98)";case"High":return"rgb(201, 79, 79)";default:return"rgb(77, 77, 77)"}}}]),e}(),j=function(){function e(t){Object(m.a)(this,e),this.root=t,this.tracks=void 0,this._selectedTrack=void 0,this.tracksLayerID=void 0,this._tracksLayer=void 0,this._trackPathsLayer=void 0,this.trackPaths2DLayer=void 0,this.tracks2DLayer=void 0,this._flagBirdColorUpdate=void 0,this._flagBirdTrackUpdate=void 0,this._flagLineColorUpdate=void 0,this._visualizationParameter=void 0,this._numSecondsToKeep=void 0,this._maxNumberOfTracks=void 0,this.shouldFilterTime=void 0,this.shouldFilterTrackLength=void 0,this.classificationColorMapping=void 0,this.riskColorMapping=void 0,Object(y.e)(this,{tracks:!1,classificationColorMapping:!1,riskColorMapping:!1}),this.shouldFilterTime=!0,this.shouldFilterTrackLength=!0;var i=t.config.modules.trackRiskLevel;this._visualizationParameter=i?"Risk":"Classification",this.classificationColorMapping=this.root.config.settings.classificationDefinitions,this.riskColorMapping=this.root.config.settings.riskDefinitions,this._selectedTrack=null,this.initilizeLayers(),this._flagBirdColorUpdate=0,this._flagBirdTrackUpdate=0,this._flagLineColorUpdate=0,this._numSecondsToKeep=t.config.settings.performance.retainTimeOptionsDefault,this._maxNumberOfTracks=t.config.settings.performance.maxTracksOptionsDefault,this.tracks=new Array(this._maxNumberOfTracks),this.clearTracks()}return Object(v.a)(e,[{key:"visualizationParameter",get:function(){return this._visualizationParameter},set:function(e){this._visualizationParameter=e}},{key:"tracksLayer",get:function(){return this._tracksLayer}},{key:"tracksPathLayer",get:function(){return this._trackPathsLayer}},{key:"numSecondsToKeep",get:function(){return this._numSecondsToKeep},set:function(e){this._numSecondsToKeep=e}},{key:"maxNumberOfTracks",get:function(){return this._maxNumberOfTracks},set:function(e){this._maxNumberOfTracks=e;for(var t=this.tracks,i=new Array(this._maxNumberOfTracks),a=0;a<Math.min(t.length,i.length);)i[a]=t[a],++a;for(;a<i.length;)i[a]=new w(this.root,"",x,"Low","UNDEFINED",[[0,0,0]]),++a;this.tracks=i,this.flagBirdTrackUpdate(),this.flagBirdColorUpdate()}},{key:"selectedTrack",get:function(){return this._selectedTrack},set:function(e){if(this._selectedTrack=e,this._selectedTrack&&this._selectedTrack.locations&&this._selectedTrack.locations.length>0&&(this.root.mapStore.camera2DViewState=Object(g.a)(Object(g.a)({},this.root.mapStore.camera2DViewState),{},{longitude:this._selectedTrack.locations[0][0],latitude:this._selectedTrack.locations[0][1],zoom:this.root.mapStore.currentZoomLevel}),this.root.mapStore._cameraBirdPointOfViewState=Object(g.a)(Object(g.a)({},this.root.mapStore.camera2DViewState),{},{longitude:this._selectedTrack.locations[0][0],latitude:this._selectedTrack.locations[0][1],zoom:this.root.mapStore.currentZoomLevel})),this._selectedTrack){var t,i,a=this._selectedTrack.locations[0][0],r=this._selectedTrack.locations[0][1];this._selectedTrack.locations.length>1?(t=this._selectedTrack.locations[1][0],i=this._selectedTrack.locations[1][1]):(t=10.65909,i=56.15659);var n=this.root.mapStore.positionsToBearing(t,i,a,r);this.root.mapStore._cameraBirdPointOfViewState={longitude:this._selectedTrack.locations[0][0],latitude:this._selectedTrack.locations[0][1],zoom:1,pitch:0,bearing:n,maxPitch:85,position:[0,0,this._selectedTrack.locations[0][2]]}}this.flagBirdColorUpdate(),this.flagLineColorUpdate(),this.updateTracks2DLayer(),this.updateTrackPaths2DLayer()}},{key:"updateTrack",value:function(e){for(var t,i,a=this.shouldFilterTime?new Date(Date.now()-1e3*this._numSecondsToKeep):x,r=0;r<this.tracks.length;++r){var n=this.tracks[r];n.lastObsDateTime<a&&(n.id="",n.lastObsDateTime=x,n.alertLevel="low",n.locations=[[]])}for(var s,o=new w(this.root,"",D,"Low","UNDEFINED",[[0,0,0]]),c=0;c<this.tracks.length;++c){var l=this.tracks[c];l.lastObsDateTime<o.lastObsDateTime&&(o=l)}var d=this.tracks.find((function(t){return t.id===e.id}));(s=d||o).id=e.id,s.lastObsDateTime=e.lastObsDateTime,s.alertLevel=e.alertLevel,s.locations=this.shouldFilterTrackLength?e.locations.slice(0,100):e.locations,e.id===(null!==(t=null===(i=this.selectedTrack)||void 0===i?void 0:i.id)&&void 0!==t?t:"")&&(this.selectedTrack=new w(this.root,s.id,s.lastObsDateTime,s.alertLevel,s.classification,s.locations)),this.flagBirdTrackUpdate(),this.flagBirdColorUpdate(),this.flagLineColorUpdate(),this.updateTracksLayer(),this.updateTracks2DLayer(),this.updateTrackPathsLayer(),this.updateTrackPaths2DLayer()}},{key:"clearTracks",value:function(){for(var e=0;e<this.tracks.length;++e)this.tracks[e]=new w(this.root,"",x,"Low","UNDEFINED",[[0,0,0]]);this.flagBirdTrackUpdate(),this.flagBirdColorUpdate(),this.flagLineColorUpdate(),this.updateTracksLayer(),this.updateTracks2DLayer(),this.updateTrackPathsLayer(),this.updateTrackPaths2DLayer()}},{key:"initilizeLayers",value:function(){this.tracksLayerID="Tracks-Layer-".concat((new Date).getTime().toString()),this.updateTracks2DLayer(),this.updateTracksLayer(),this.updateTrackPathsLayer(),this.updateTrackPaths2DLayer()}},{key:"updateTracksLayer",value:function(){var e=this;this._tracksLayer=new b.a({id:this.tracksLayerID,data:this.tracks,pickable:!0,scenegraph:"".concat(this.root.apiStore.frontendHost,"/bird.glb"),getPosition:function(e){return e.locations[0]},getScale:function(e){return[10,10,10]},_lighting:"pbr",getColor:function(t){return e.selectedTrack&&e.selectedTrack.id===t.id?[255,0,255]:"Risk"===e.visualizationParameter?null!==(i=null===(a=e.riskColorMapping.find((function(e){return e.name===t.alertLevel})))||void 0===a?void 0:a.colorGFX)&&void 0!==i?i:[77,77,77]:null!==(r=null===(n=e.classificationColorMapping.find((function(e){return e.name===t.classification})))||void 0===n?void 0:n.colorGFX)&&void 0!==r?r:[77,77,77];var i,a,r,n},onClick:function(t){var i=t.object;t.layer;e.selectedTrack=new w(e.root,i.id,i.lastObsDateTime,i.alertLevel,i.classification,i.locations)},updateTriggers:{getPosition:this._flagBirdTrackUpdate,getColor:this._flagBirdColorUpdate}})}},{key:"updateTracks2DLayer",value:function(){var e,t,i=this,a=null!==(e=null===(t=this._selectedTrack)||void 0===t?void 0:t.id)&&void 0!==e?e:"";this.tracks2DLayer=new T.a({id:"2D-".concat(this.tracksLayerID),data:this.tracks,pickable:!0,stroked:!0,filled:!0,radiusScale:1,radiusMinPixels:7,radiusMaxPixels:30,lineWidthMinPixels:1,lineWidthMaxPixels:5,getPosition:function(e){return[e.locations[0][0],e.locations[0][1],5]},getRadius:function(e){return 5},getFillColor:function(e){var t,a,r,n;return"Risk"===i.visualizationParameter?null!==(t=null===(a=i.riskColorMapping.find((function(t){return t.name===e.alertLevel})))||void 0===a?void 0:a.colorGFX)&&void 0!==t?t:[77,77,77]:null!==(r=null===(n=i.classificationColorMapping.find((function(t){return t.name===e.classification})))||void 0===n?void 0:n.colorGFX)&&void 0!==r?r:[77,77,77]},getLineColor:function(e){return a===e.id?[255,0,255]:[0,0,0]},getLineWidth:function(e){return 2},updateTriggers:{getPosition:this._flagBirdTrackUpdate,getFillColor:this._flagBirdColorUpdate,getLineColor:this._flagLineColorUpdate,getLineWidth:this._flagLineColorUpdate},onClick:function(e){var t=e.object;e.layer;i.selectedTrack=new w(i.root,t.id,t.lastObsDateTime,t.alertLevel,t.classification,t.locations)}})}},{key:"updateTrackPathsLayer",value:function(){var e=this;this._trackPathsLayer=new k.a({id:"Path-".concat(this.tracksLayerID),data:this.tracks,pickable:!1,widthMinPixels:1,widthMaxPixels:1,billboard:!0,getPath:function(e){return e.locations},getColor:function(t){return e.selectedTrack&&e.selectedTrack.id===t.id?[255,0,255]:"Risk"===e.visualizationParameter?null!==(i=null===(a=e.riskColorMapping.find((function(e){return e.name===t.alertLevel})))||void 0===a?void 0:a.colorGFX)&&void 0!==i?i:[77,77,77]:null!==(r=null===(n=e.classificationColorMapping.find((function(e){return e.name===t.classification})))||void 0===n?void 0:n.colorGFX)&&void 0!==r?r:[77,77,77];var i,a,r,n},updateTriggers:{getPath:this._flagBirdTrackUpdate,getColor:this._flagBirdColorUpdate}})}},{key:"updateTrackPaths2DLayer",value:function(){var e=this;this.trackPaths2DLayer=new k.a({id:"Path-2D-".concat(this.tracksLayerID),data:this.tracks,pickable:!1,widthMinPixels:1,billboard:!0,getPath:function(e){return e.locations.map((function(e){return[e[0],e[1],4]}))},getColor:function(t){return e.selectedTrack&&t.id===e.selectedTrack.id?[255,0,255]:"Risk"===e.visualizationParameter?null!==(i=null===(a=e.riskColorMapping.find((function(e){return e.name===t.alertLevel})))||void 0===a?void 0:a.colorGFX)&&void 0!==i?i:[77,77,77]:null!==(r=null===(n=e.classificationColorMapping.find((function(e){return e.name===t.alertLevel})))||void 0===n?void 0:n.colorGFX)&&void 0!==r?r:[77,77,77];var i,a,r,n},getWidth:function(e){return 1},updateTriggers:{getPath:this._flagBirdTrackUpdate,getColor:this._flagBirdColorUpdate}})}},{key:"flagBirdColorUpdate",value:function(){this._flagBirdColorUpdate=this._flagBirdColorUpdate+1}},{key:"flagBirdTrackUpdate",value:function(){this._flagBirdTrackUpdate=this._flagBirdTrackUpdate+1}},{key:"flagLineColorUpdate",value:function(){this._flagLineColorUpdate=this._flagLineColorUpdate+1}}]),e}(),L=function e(t){Object(m.a)(this,e),this.root=t,this.accessToken=void 0,this.refreshToken=void 0,Object(y.e)(this),this.accessToken=null,this.refreshToken=null},_=i(3),O=i.n(_),S=function e(t,i,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500;Object(m.a)(this,e),this.id=void 0,this.alertType=void 0,this.message=void 0,this.shouldAutoHide=void 0,this.duration=void 0,this.id=t,this.alertType=i,this.message=a,this.shouldAutoHide=r,this.duration=n},P=function(){function e(t){Object(m.a)(this,e),this.root=t,this.alert=void 0,this._isSnackbarClosed=void 0,Object(y.e)(this),this.alert=null,this._isSnackbarClosed=!1}return Object(v.a)(e,[{key:"addAlert",value:function(e){this.alert=e}},{key:"removeAlert",value:function(e){this.alert&&this.alert.id===e&&(this.alert=null)}},{key:"removeAlertAfterDelay",value:function(e,t){var i=this;this.isSnackbarClosed=!0,setTimeout((function(){i.removeAlert(e),i.isSnackbarClosed=!1}),t)}},{key:"isSnackbarClosed",get:function(){return this._isSnackbarClosed},set:function(e){this._isSnackbarClosed=e}}]),e}(),C=function(){function e(t,i,a,r,n){Object(m.a)(this,e),this.root=t,this.api=void 0,this.authApi=void 0,this.frontendHost=void 0,this.auth=void 0,this.login=Object(y.c)(O.a.mark((function e(t,i){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.authApi,"/api/tokens"),{method:"POST",body:JSON.stringify({id:t,password:i}),headers:{"Content-Type":"application/json"}});case 2:if(404!==(a=e.sent).status&&400!==a.status){e.next=6;break}return this.root.notificationsStore.addAlert(new S("invalid-login","error","Invalid username or password. Please try again...",!1,5e3)),e.abrupt("return",null);case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e,this)}))),this.fetchTurbines=Object(y.c)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.api,"/api/WindTurbine?ouputWgs84=true"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth.accessToken)}});case 2:if(t=e.sent,!this.isTokenExpired(t)){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e,this)}))),this.fetchTracks=Object(y.c)(O.a.mark((function e(t,i,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.api,"/api/MuseTracks?from=").concat(t.toISOString(),"&to=").concat(i.toISOString(),"&maxresultcount=").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth.accessToken)}});case 2:if(r=e.sent,!this.isTokenExpired(r)){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e,this)}))),this.fetchTracksLastBefore=Object(y.c)(O.a.mark((function e(t){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.api,"/api/MuseTracks/LastBefore?datetime=").concat(t.toISOString()),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth.accessToken)}});case 2:if(i=e.sent,!this.isTokenExpired(i)){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e,this)}))),this.fetchWindTurbineAlerts=Object(y.c)(O.a.mark((function e(t,i,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.api,"/api/WindTurbine/Alerts?from=").concat(t.toISOString(),"&to=").concat(i.toISOString(),"&windTurbineId=").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth.accessToken)}});case 2:if(r=e.sent,!this.isTokenExpired(r)){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e,this)}))),this.fetchTNOStatistics=Object(y.c)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.api,"/api/TnoStatistics"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth.accessToken)}});case 2:if(t=e.sent,!this.isTokenExpired(t)){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e,this)}))),this.fetchAnalysisTimesteps=Object(y.c)(O.a.mark((function e(t,i,a,r){var n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.root.apiStore.frontendHost,"/timesteps.zip"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.auth.accessToken),Accept:"application/x-zip-compressed"}});case 3:if(n=e.sent,!this.isTokenExpired(n)){e.next=6;break}return e.abrupt("return",{});case 6:if(404!==n.status||!r){e.next=9;break}return r("Unable to located file with ID: ".concat(t)),e.abrupt("return");case 9:if(500!==n.status||!r){e.next=12;break}return r("No time steps available for selected time period."),e.abrupt("return");case 12:if(200===n.status){e.next=15;break}return r&&r("Failed to download time steps..."),e.abrupt("return");case 15:return e.next=17,n.blob();case 17:return s=e.sent,e.abrupt("return",s);case 21:e.prev=21,e.t0=e.catch(0),r&&r("Failed to download time steps...");case 24:case"end":return e.stop()}}),e,this,[[0,21]])}))),Object(y.e)(this),this.api=a,this.authApi=r,this.frontendHost=n,this.auth=i}return Object(v.a)(e,[{key:"isTokenExpired",value:function(e){return 401===e.status&&(this.root.notificationsStore.addAlert(new S("login-token-expired","warning","Login expired",!0,5e3)),this.root.currentPage="login",!0)}}]),e}(),B=i(213),I=i(289),A=function e(t,i){Object(m.a)(this,e),this.id=void 0,this.location=void 0,this.id=t,this.location=i},F=function e(t,i,a,r){Object(m.a)(this,e),this.radarId=void 0,this.location=void 0,this.radius=void 0,this.labelLocation=void 0,this.radarId=i,this.location=a,this.radius=r;var n=t.coordinateConverter.forward(this.location),s=n[1]+r,o=t.coordinateConverter.inverse([n[0],s]);this.labelLocation=[o[0],o[1],2]},z=function(){function e(t){Object(m.a)(this,e),this.root=t,this.radars=void 0,this.radarsLayer=void 0,this.radars3DLayer=void 0,this.radarsRadius3DLayer=void 0,this.radarLayersID=void 0,this._radarsRadiusLayer=void 0,this.radarsRadiuses=void 0,this.radarsRadius2DTextLayer=void 0,this.radarsRadius3DTextLayer=void 0,Object(y.e)(this,{radars:!1,radarsLayer:!1,radarsRadiuses:!1}),this.radars=[new A("Test Radar 1",[10.667887,56.156151])],this.radarsRadiuses=this.radars.map((function(e){return[new F(t.mapStore,e.id,e.location,1e3),new F(t.mapStore,e.id,e.location,2e3),new F(t.mapStore,e.id,e.location,3e3),new F(t.mapStore,e.id,e.location,4e3),new F(t.mapStore,e.id,e.location,5e3),new F(t.mapStore,e.id,e.location,6e3),new F(t.mapStore,e.id,e.location,7e3),new F(t.mapStore,e.id,e.location,8e3),new F(t.mapStore,e.id,e.location,9e3),new F(t.mapStore,e.id,e.location,1e4)]})).flat(),this.initilizeLayers()}return Object(v.a)(e,[{key:"radarsRadiusLayer",get:function(){return this._radarsRadiusLayer}},{key:"initilizeLayers",value:function(){this.radarLayersID="Radars-Layer-".concat((new Date).getTime().toString()),this.updateRadarsLayer(),this.updateRadars3DLayer(),this.updateRadarsRadiusLayer(),this.updateRadarsRadius3DLayer(),this.updateRadarsRadius2DTextLayer(),this.updateRadarsRadius3DTextLayer()}},{key:"updateRadarsLayer",value:function(){var e=this;this.radarsLayer=new B.a({id:"Radar-icon-".concat(this.radarLayersID),data:this.radars,pickable:!0,getIcon:function(t){return{url:"".concat(e.root.apiStore.frontendHost,"/icons/Radar.png"),height:256,width:256,mask:!1}},sizeScale:1,getPosition:function(e){return[e.location[0],e.location[1],2]},getSize:function(e){return 25},getColor:function(e){return[100,100,100]}})}},{key:"updateRadars3DLayer",value:function(){this.radars3DLayer=new b.a({id:"Radar-animated-".concat(this.radarLayersID),data:this.radars,pickable:!0,scenegraph:"".concat(this.root.apiStore.frontendHost,"/radar.glb"),getPosition:function(e){return[e.location[0],e.location[1],0]},getOrientation:function(e){return[0,180,90]},getColor:function(e){return[240,255,255]},sizeScale:15,_animations:{"*":{speed:1}},_lighting:"pbr"})}},{key:"updateRadarsRadiusLayer",value:function(){this._radarsRadiusLayer=new T.a({id:"radius-".concat(this.radarLayersID),data:this.radarsRadiuses,pickable:!1,stroked:!0,filled:!1,lineWidthMinPixels:2,getPosition:function(e){return[e.location[0],e.location[1],1]},getRadius:function(e){return e.radius},getLineColor:[255,255,255,100]})}},{key:"updateRadarsRadius2DTextLayer",value:function(){this.radarsRadius2DTextLayer=new I.a({id:"radius-label-".concat(this.radarLayersID),data:this.radarsRadiuses,pickable:!1,getPosition:function(e){return e.labelLocation},getText:function(e){return"".concat(e.radius,"m")},getSize:10,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center"})}},{key:"updateRadarsRadius3DTextLayer",value:function(){this.radarsRadius3DTextLayer=new I.a({id:"radius-label-".concat(this.radarLayersID),data:this.radarsRadiuses,pickable:!1,getPosition:function(e){return[e.labelLocation[0],e.labelLocation[1],50]},getText:function(e){return"".concat(e.radius,"m")},getSize:60,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center",billboard:!0,sizeUnits:"meters"})}},{key:"updateRadarsRadius3DLayer",value:function(){this.radarsRadius3DLayer=new T.a({id:"radius-3D-".concat(this.radarLayersID),data:this.radarsRadiuses,pickable:!1,stroked:!0,filled:!1,lineWidthMinPixels:2,getPosition:function(e){return[e.location[0],e.location[1],1]},getRadius:function(e){return e.radius},getLineColor:[255,255,255,100]})}}]),e}(),M=i(296),V=i(438),R=i(221),E=function(){function e(t){Object(m.a)(this,e),this.root=t,this._viewportType=void 0,this._cameraType=void 0,this._cameraTraditionalView=void 0,this._cameraFirstPersonView=void 0,this._camera2DViewState=void 0,this._cameraTraditionalViewState=void 0,this._cameraFirstPersonViewState=void 0,this._cameraBirdPointOfViewState=void 0,this._cameraOrthographicView=void 0,this._cameraBirdPointOfView=void 0,this.coordinateConverter=void 0,this._areMapLayersInitialized=void 0,this.currentZoomLevel=void 0,Object(y.e)(this,{_cameraTraditionalView:!1,_cameraFirstPersonView:!1,_camera2DViewState:!1,_cameraTraditionalViewState:!1,_cameraFirstPersonViewState:!1,_cameraBirdPointOfView:!1}),this._areMapLayersInitialized=!1,this._viewportType="2D",this._cameraType="Traditional",this._cameraOrthographicView=new M.a({id:"orthographic-camera",controller:!0,orthographic:!0,nearZMultiplier:.3}),this._cameraTraditionalView=new M.a({id:"traditional-camera",controller:!0,nearZMultiplier:.2}),this._cameraFirstPersonView=new V.a({id:"first-person",controller:{moveSpeed:20},near:9,far:7e3}),this._cameraBirdPointOfView=new V.a({id:"bird-pov-camera",controller:!0,near:9,far:7e3});var i=this.root.config.settings.map.cameraDefaults;this.currentZoomLevel=i.View2D.zoom,this._camera2DViewState={longitude:i.View2D.location[0],latitude:i.View2D.location[1],zoom:i.View2D.zoom,pitch:i.View2D.pitch,bearing:i.View2D.bearing,maxPitch:i.View2D.maxPitch},this._cameraTraditionalViewState={longitude:i.View3D.location[0],latitude:i.View3D.location[1],zoom:i.View3D.zoom,pitch:i.View3D.pitch,bearing:i.View3D.bearing,maxPitch:i.View3D.maxPitch},this._cameraFirstPersonViewState={longitude:i.ViewFirstPerson.location[0],latitude:i.ViewFirstPerson.location[1],zoom:i.ViewFirstPerson.zoom,pitch:i.ViewFirstPerson.pitch,bearing:i.ViewFirstPerson.bearing,maxPitch:i.ViewFirstPerson.maxPitch,position:i.ViewFirstPerson.position},this._cameraBirdPointOfViewState={longitude:0,latitude:0,zoom:1,pitch:0,bearing:0,maxPitch:85,position:[0,0,90]},R.a.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs"),R.a.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),this.coordinateConverter=Object(R.a)("EPSG:4326","EPSG:32632")}return Object(v.a)(e,[{key:"camera2DViewState",get:function(){return this._camera2DViewState},set:function(e){this._camera2DViewState=e}},{key:"getViewState",value:function(){if("2D"===this._viewportType)return this._camera2DViewState;if("Traditional"===this._cameraType)return this._cameraTraditionalViewState;if("FirstPerson"===this._cameraType)return this._cameraFirstPersonViewState;if("BirdPOV"===this._cameraType)return this._cameraBirdPointOfViewState;throw new Error("Unknown camera type selected.")}},{key:"viewport",get:function(){return"2D"===this._viewportType||"historical"===this.root.currentPage?this._cameraOrthographicView:"3D"===this._viewportType&&"FirstPerson"===this._cameraType?this._cameraFirstPersonView:"3D"===this._viewportType&&"BirdPOV"===this._cameraType?this._cameraBirdPointOfView:this._cameraTraditionalView}},{key:"viewportType",get:function(){return this._viewportType},set:function(e){this._viewportType=e}},{key:"cameraType",get:function(){return this._cameraType},set:function(e){this._cameraType=e}},{key:"toggleMapViewType",value:function(){this._viewportType="2D"===this._viewportType?"3D":"2D","2D"===this._viewportType&&"FirstPerson"===this._cameraType&&(this._cameraType="Traditional"),this.areMapLayersInitialized=!1,this.initializeLayers()}},{key:"toggleCameraType",value:function(){this._cameraType="Traditional"===this._cameraType?"FirstPerson":"Traditional"}},{key:"areMapLayersInitialized",get:function(){return this._areMapLayersInitialized},set:function(e){this._areMapLayersInitialized=e}},{key:"initializeLayers",value:function(){switch(this.areMapLayersInitialized=!1,this.root.currentPage){case"live":case"historical":case"analysis":case"reporting":this.root.tracksStore.initilizeLayers(),this.root.radarsStore.initilizeLayers(),this.root.analysisStore.initializeLayers()}this.areMapLayersInitialized=!0}},{key:"positionsToBearing",value:function(e,t,i,a){var r=Math.sin(i-e)*Math.cos(a),n=Math.cos(t)*Math.sin(a)-Math.sin(t)*Math.cos(a)*Math.cos(i-e);return(180*Math.atan2(r,n)/Math.PI+360)%360}}]),e}(),U=i(152),G=i(23),N=i(20),H=i(9),W=i(10),X=i(220),K=i(123),Z=i(255),J=i(265),q=i(287),Y=i(288),Q=i(406),$=function(e){return"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nstruct ColorBand {\n  float value;\n  vec4 color;\n};\n\nattribute vec3 positions;\nattribute float colors;\n\nuniform ColorBand colorBands[".concat(e,"];\n\nvarying vec4 vertexColor;\n\nvec4 valueToColor(float value) {\n  vec4 outColor = vec4(0.0);\n  for (int i = 0; i < ").concat(e,"; ++i) {\n    float interpolatePt = (value - colorBands[i].value) / (colorBands[i+1].value - colorBands[i].value);\n    outColor = mix(colorBands[i].color, colorBands[i+1].color, interpolatePt);\n\n    if (value <= colorBands[i+1].value) {\n      break;\n    }\n  }\n  return outColor;\n}\n\nvoid main(void) {\n  if (colors != 0.0) {\n    vertexColor = valueToColor(colors);\n} else {\n    vertexColor = vec4(0.0, 0.0, 0.0, 0.0);\n  }\n\n  vec3 center = project_position(positions);\n  gl_Position = project_common_position_to_clipspace(vec4(center, 1.0));\n}\n")},ee=function(e){Object(H.a)(i,e);var t=Object(W.a)(i);function i(){return Object(m.a)(this,i),t.apply(this,arguments)}return Object(v.a)(i,[{key:"getShaders",value:function(){var e=this.props.colorPoints.length,t=$(e);return Object(G.a)(Object(N.a)(i.prototype),"getShaders",this).call(this,{vs:t,fs:"\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vertexColor;\n\nvoid main(void) {\n  gl_FragColor = vertexColor;\n}\n",modules:[K.a,Z.a,J.a]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().add({positions:{size:3,type:X.a.FLOAT,fp64:this.use64bitPositions(),update:function(t){return t.value=e.state.mesh.positions},noAlloc:true},colors:{size:1,type:X.a.FLOAT,update:function(t){return t.value=e.state.mesh.colors},noAlloc:true}});var t=this._createMesh();this.setState(Object(g.a)({mesh:t},this._getCoordinateUniforms()))}},{key:"updateState",value:function(e){var t=e.props,i=e.oldProps;if(e.changeFlags.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}var r=this.getAttributeManager();if(t.colorsBuffer!==i.colorsBuffer){var n=this._createMesh();r.invalidate("colors"),this.setState({mesh:n})}t.colorPoints!==i.colorPoints&&this.getShaders(),t._imageCoordinateSystem!==i._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}},{key:"disablePickingIndex",value:function(){this.setState({disablePicking:!0})}},{key:"restorePickingColors",value:function(){this.setState({disablePicking:!1})}},{key:"_createMesh",value:function(){var e=this.props,t=e.verticesBuffer,i=e.colorsBuffer;return{vertexCount:t.length/3,positions:t,colors:i}}},{key:"_getModel",value:function(e){return e?new Y.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Q.a({drawMode:X.a.TRIANGLES,vertexCount:this.props.verticesBuffer.length/3}),isInstanced:!1})):null}},{key:"draw",value:function(e){var t=e.uniforms,i=e.moduleParameters,a=this.state,r=a.model,n=a.disablePicking;if(!i.pickingActive||!n){var s={};this.props.colorPoints.forEach((function(e,t){s["colorBands[".concat(t,"].value")]=e.value,s["colorBands[".concat(t,"].color")]=te(e.color)})),r&&r.setUniforms(t).setUniforms(Object(g.a)({},s)).draw()}}},{key:"_getCoordinateUniforms",value:function(){return{coordinateConversion:0}}}]),i}(q.a),te=function(e){return e.includes("rgba(")?ie(e):ae(e)},ie=function(e){var t=e.replace(" ","").replace("rgba(","").replace(")","").split(",");return[parseInt(t[0])/255,parseInt(t[1])/255,parseInt(t[2])/255,Math.round(255*parseFloat(t[3]))/255]},ae=function(e){var t=e.replace(" ","").replace("rgb(","").replace(")","").split(",");return[parseInt(t[0])/255,parseInt(t[1])/255,parseInt(t[2])/255,1]};ee.layerName="BinaryGridLayer";var re=i(147),ne=i(161),se=i(427),oe=i(409);U.d({useWebWorkers:!1});var ce=function(){function e(t){Object(m.a)(this,e),this.root=t,this._binaryGridLayer=void 0,this._directionLayer=void 0,this.isLoaded=void 0,this.densityPositionsBuffer=void 0,this.directionPositionsBuffer=void 0,this.densityColorAttributeBuffers=void 0,this.directionBuffers=void 0,this.densityColorAttributeBufferEmpty=void 0,this.directionBufferEmpty=void 0,this._fromDate=void 0,this._toDate=void 0,this.timestepDateTimesDensity=void 0,this.timestepDateTimesDirection=void 0,this._currentTimestepIndex=void 0,this._selectedParameter=void 0,this.minDensityValue=void 0,this.maxDensityValue=void 0,this._legendScale=void 0,this._selectedSummaryID=void 0,this.gridLayerID=void 0,this._interval=void 0,this.isPlaying=void 0,this.retrieveTimeSteps=Object(y.c)(O.a.mark((function e(){var t,i,a,r=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root.config.settings.analysis.summaryIDs.find((function(e){return e.ID===r._selectedSummaryID}))){e.next=4;break}return this.root.notificationsStore.addAlert(new S("loading-data","error","Failed to locate summary analysis details in configuration...",!0,5e3)),e.abrupt("return");case 4:if(this.root.notificationsStore.addAlert(new S("loading-data","info","Loading data...",!1,5e3)),this.timestepDateTimesDensity=[],this.timestepDateTimesDirection=[],this.densityColorAttributeBuffers=[],this.directionBuffers=[],!t.densityID){e.next=17;break}return e.next=12,this.root.apiStore.fetchAnalysisTimesteps(t.densityID,this.fromDate,this.toDate,(function(e){r.root.notificationsStore.addAlert(new S("loading-data","error",e,!0,5e3))}));case 12:if(i=e.sent){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,this.extractDataFromBlob(i,"Density");case 17:if(!t.directionID){e.next=25;break}return e.next=20,this.root.apiStore.fetchAnalysisTimesteps(t.directionID,this.fromDate,this.toDate,(function(e){r.root.notificationsStore.addAlert(new S("loading-data","error",e,!0,5e3))}));case 20:if(a=e.sent){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.extractDataFromBlob(a,"Direction");case 25:this.currentTimestepIndex=0,this.renderDensityGridLayer(),this.renderDirectionLayer(),this.isLoaded=!0,this.root.notificationsStore.addAlert(new S("loading-data","success","Data download complete!",!0,5e3));case 30:case"end":return e.stop()}}),e,this)}))),this.extractDataFromBlob=Object(y.c)(O.a.mark((function e(t,i){var a,r,n,s,o,c,l,d,u,h=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new U.c(new U.a(t)),e.next=3,a.getEntries();case 3:if(!(r=e.sent).length){e.next=27;break}if(0!==r.length-2){e.next=9;break}return this.root.notificationsStore.addAlert(new S("loading-data","warning","No data available for the selected time period.",!1,5e3)),e.abrupt("return");case 9:return n=r.findIndex((function(e){return"vertices.bin"===e.filename})),e.next=12,this.zipEntryToBuffer(r,n);case 12:return s=e.sent,o=r.findIndex((function(e){return"stats.json"===e.filename})),e.next=16,this.zipEntryToJSON(r,o);case 16:c=e.sent,"Density"===i?this.timestepDateTimesDensity=c.dateTimes.map((function(e){return new Date(e)})):"Direction"===i&&(this.timestepDateTimesDirection=c.dateTimes.map((function(e){return new Date(e)}))),l=[],d=O.a.mark((function e(t){var a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.findIndex((function(e){return e.filename==="".concat(t,".bin")})),e.next=3,h.zipEntryToBuffer(r,a);case 3:n=e.sent,"Density"===i?(s=h.dfsValuesToColorBuffer(n),l.push(s),0===t&&(h.densityColorAttributeBufferEmpty=new Float32Array(s.length))):"Direction"===i&&(l.push(n),0===t&&(h.directionBufferEmpty=new Float32Array(n.length)));case 5:case"end":return e.stop()}}),e)})),u=0;case 21:if(!(u<r.length-2)){e.next=26;break}return e.delegateYield(d(u),"t0",23);case 23:++u,e.next=21;break;case 26:"Density"===i?(this.densityPositionsBuffer=s,this.densityColorAttributeBuffers=l,this.minDensityValue=0,this.maxDensityValue=12,this.legendScale=this.generateLegendColorPoints()):"Direction"===i&&(this.directionPositionsBuffer=s,this.directionBuffers=l);case 27:return e.next=29,a.close();case 29:case"end":return e.stop()}}),e,this)}))),this.zipEntryToBuffer=Object(y.c)(O.a.mark((function e(t,i){var a,r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[i],e.next=3,a.getData(new U.b);case 3:return r=e.sent,e.next=6,r.arrayBuffer();case 6:return n=e.sent,e.abrupt("return",new Float32Array(n));case 8:case"end":return e.stop()}}),e)}))),this.zipEntryToJSON=Object(y.c)(O.a.mark((function e(t,i){var a,r,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[i],e.next=3,a.getData(new U.b);case 3:return r=e.sent,e.next=6,r.text();case 6:return n=e.sent,s=JSON.parse(n),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),Object(y.e)(this,{densityPositionsBuffer:!1,densityColorAttributeBuffers:!1,directionPositionsBuffer:!1}),this._binaryGridLayer=null,this._directionLayer=null,this.isLoaded=!1,this.densityPositionsBuffer=null,this.directionPositionsBuffer=null,this.densityColorAttributeBuffers=[],this.directionBuffers=[],this.densityColorAttributeBufferEmpty=null,this.directionBufferEmpty=null,this._currentTimestepIndex=0,this._toDate=Object(re.a)(new Date),this._fromDate=Object(re.a)(Object(ne.a)(this._toDate,-1)),this.timestepDateTimesDensity=[],this.timestepDateTimesDirection=[],this._interval=null,this.isPlaying=!1,this._selectedParameter="Density",this._legendScale=[],this.minDensityValue=0,this.maxDensityValue=0,this._selectedSummaryID=this.root.config.settings.analysis.summaryIDs[0].ID,this.initializeLayers()}return Object(v.a)(e,[{key:"selectedParameter",get:function(){return this._selectedParameter},set:function(e){this._selectedParameter=e,this.initializeLayers()}},{key:"selectedSummaryID",get:function(){return this._selectedSummaryID},set:function(e){this._selectedSummaryID=e}},{key:"currentTimestepIndex",get:function(){return this._currentTimestepIndex},set:function(e){this._currentTimestepIndex=e}},{key:"interval",get:function(){return this._interval},set:function(e){this._interval=e}},{key:"legendScale",get:function(){return this._legendScale},set:function(e){this._legendScale=e}},{key:"fromDate",get:function(){return this._fromDate},set:function(e){this._fromDate=e}},{key:"toDate",get:function(){return this._toDate},set:function(e){this._toDate=e}},{key:"binaryGridLayer",get:function(){return this._binaryGridLayer},set:function(e){this._binaryGridLayer=e}},{key:"directionLayer",get:function(){return this._directionLayer},set:function(e){this._directionLayer=e}},{key:"timestepsLength",get:function(){switch(this.selectedParameter){case"Density":return this.timestepDateTimesDensity.length;case"Direction":return this.timestepDateTimesDirection.length;default:throw new Error("Unknown parameter selected.")}}},{key:"currentTimestepDate",get:function(){switch(this.selectedParameter){case"Density":return this.timestepDateTimesDensity.length>0&&this.currentTimestepIndex<this.timestepDateTimesDensity.length?this.timestepDateTimesDensity[this.currentTimestepIndex]:null;case"Direction":return this.timestepDateTimesDirection.length>0&&this.currentTimestepIndex<this.timestepDateTimesDirection.length?this.timestepDateTimesDirection[this.currentTimestepIndex]:null;default:throw new Error("Unknown parameter selected.")}}},{key:"play",value:function(){var e=this;this.isPlaying=!0,this.interval=setInterval((function(){e.currentTimestepIndex<e.timestepsLength-1?e.currentTimestepIndex++:e.currentTimestepIndex=0,e.renderDensityGridLayer(),e.renderDirectionLayer()}),60)}},{key:"pause",value:function(){this.isPlaying=!1,this.interval&&clearInterval(this.interval)}},{key:"stepForward",value:function(){this.pause(),this._currentTimestepIndex<this.timestepsLength-1&&this._currentTimestepIndex++,this.renderDensityGridLayer(),this.renderDirectionLayer()}},{key:"stepBackward",value:function(){this.pause(),this._currentTimestepIndex>0&&this._currentTimestepIndex--,this.renderDensityGridLayer(),this.renderDirectionLayer()}},{key:"skipToStart",value:function(){this.pause(),this._currentTimestepIndex=0,this.renderDensityGridLayer(),this.renderDirectionLayer()}},{key:"skipToEnd",value:function(){this.pause(),this._currentTimestepIndex=this.timestepsLength-1,this.renderDensityGridLayer(),this.renderDirectionLayer()}},{key:"initializeLayers",value:function(){this.gridLayerID="Grid-Layer-".concat((new Date).getTime().toString()),this.renderDensityGridLayer(),this.renderDirectionLayer()}},{key:"renderDensityGridLayer",value:function(){var e,t,i=this;t=-1!==(e=this.currentTimestepDate?this.timestepDateTimesDensity.findIndex((function(e){var t;return e.getTime()===(null===(t=i.currentTimestepDate)||void 0===t?void 0:t.getTime())})):-1)?this.densityColorAttributeBuffers[e]:this.densityColorAttributeBufferEmpty,this.binaryGridLayer=new ee({id:this.gridLayerID,verticesBuffer:this.densityPositionsBuffer,colorsBuffer:t,colorPoints:Object(y.i)(this.legendScale),parameters:{depthTest:!1}})}},{key:"renderDirectionLayer",value:function(){var e,t,i=this;t=-1!==(e=this.currentTimestepDate?this.timestepDateTimesDirection.findIndex((function(e){var t;return e.getTime()===(null===(t=i.currentTimestepDate)||void 0===t?void 0:t.getTime())})):-1)?this.directionBuffers[e]:this.directionBufferEmpty;var a=this.root.apiStore.frontendHost;this.directionPositionsBuffer&&(this._directionLayer=new b.a({id:"".concat(this.gridLayerID,"-direction"),data:{length:this.directionPositionsBuffer.length/3,directionAttribBuffer:t,attributes:{getPosition:{value:this.directionPositionsBuffer,size:3}}},scenegraph:"".concat(a,"/arrow.glb"),getOrientation:function(e,t){var i=t.index,a=t.data,r=a.directionAttribBuffer[2*i],n=a.directionAttribBuffer[2*i+1];return[0,180*Math.atan2(n,r)/Math.PI,90]},getColor:[0,0,0,200],getScale:function(e,t){var i=t.index,a=t.data,r=a.directionAttribBuffer[2*i],n=a.directionAttribBuffer[2*i+1],s=Math.sqrt(r*r+n*n);return[25*s,25*s,25*s]},_lighting:"flat",parameters:{depthTest:!1}}))}},{key:"dfsValuesToColorBuffer",value:function(e){for(var t=new Float32Array(3*e.length),i=0,a=0;a<e.length;++a){var r=e[a];t[i++]=r,t[i++]=r,t[i++]=r}return t}},{key:"generateLegendColorPoints",value:function(){for(var e=0,t=[1,2,5,10,15,20,25,50,100,150,200,250,300,400,500,1e3,2e3,5e3,1e4,2e4,25e3,5e4,1e5,2e5,25e4,5e5];e<t.length;){var i=t[e],a=Math.floor(this.minDensityValue/i);if(!(Math.ceil(this.maxDensityValue/i)+1-a>10))break;e++}for(var r=t[e],n=[],s=Math.floor(this.minDensityValue/r),o=Math.ceil(this.maxDensityValue/r)+1,c=Object(se.a)().domain([s,.25*(s+o),.5*(s+o),.75*(s+o),o]).range(["#211fccaa","#438ba1cc","#edea37cc","#eb9c2fcc","#c91818cc"]).interpolate(oe.a),l=s;l<o;++l){var d=l*r;n.push({value:d,color:c(l),label:"".concat(d)})}return n}}]),e}(),le=function(){function e(t){Object(m.a)(this,e),this.apiStore=void 0,this.authStore=void 0,this._currentPage=void 0,this.notificationsStore=void 0,this.mapStore=void 0,this.tracksStore=void 0,this.radarsStore=void 0,this.analysisStore=void 0,this.config=void 0,this._isDrawerOpen=void 0,Object(y.e)(this),this.config=t,this.authStore=new L(this),this.apiStore=new C(this,this.authStore,this.config.connectionStrings.visualizerURL,this.config.connectionStrings.authURL,this.config.connectionStrings.frontendURL),this._currentPage="analysis",this.notificationsStore=new P(this),this.mapStore=new E(this),this.tracksStore=new j(this),this.radarsStore=new z(this),this.analysisStore=new ce(this),this._isDrawerOpen=!0}return Object(v.a)(e,[{key:"currentPage",get:function(){return this._currentPage},set:function(e){this._currentPage=e}},{key:"toggleIsDrawerOpen",value:function(){this._isDrawerOpen=!this._isDrawerOpen}},{key:"isDrawerOpen",get:function(){return this._isDrawerOpen},set:function(e){this._isDrawerOpen=e}}]),e}(),de=Object(r.createContext)(void 0);function ue(){var e;return null!==(e=Object(r.useContext)(de))&&void 0!==e?e:function(){throw new Error("RootStoreReactContext missing.")}()}var he,fe,pe,me,ve=i(295),ye=i(126),ge=i(410),be=i(416),ke=i(414),Te=i(413),xe=i(415),De=i(272),we=i.n(De),je=i(271),Le=i.n(je),_e=i(128),Oe=i(17),Se=Object(c.a)((function(){var e=ue();return Object(Oe.jsx)(Oe.Fragment,{children:Object(Oe.jsx)(ge.a,{position:"static",children:Object(Oe.jsxs)(Te.a,{style:{minHeight:"55px"},children:[Object(Oe.jsx)(d.a,{children:Object(Oe.jsx)(ke.a,{variant:"h6",style:{fontWeight:500},children:"MUSE"})}),Object(Oe.jsx)(d.a,{flexGrow:1,display:"flex",justifyContent:"center",color:"white",children:"login"!==e.currentPage&&Object(Oe.jsx)(Oe.Fragment,{children:Object(Oe.jsx)(Pe,{onClick:function(){return e.currentPage="analysis"},active:"analysis"===e.currentPage,startIcon:Object(Oe.jsx)(Le.a,{}),children:"Analysis"})})}),Object(Oe.jsx)(d.a,{children:Object(Oe.jsx)(xe.a,{edge:"end",color:"inherit","aria-label":"menu",onClick:function(){return e.toggleIsDrawerOpen()},children:Object(Oe.jsx)(we.a,{})})})]})})})})),Pe=Object(_e.a)((function(e){e.active;var t=Object(ve.a)(e,["active"]);return Object(Oe.jsx)(be.a,Object(g.a)({},t))}))(he||(he=Object(ye.a)(["\n  height: 55px;\n  color: ",";\n  border-bottom: ",";\n  background-color: ",";\n  font-size: 1.0rem;\n  margin: 0 0;\n  width: 160px;\n  font-weight: 500;\n  &:disabled {\n    color: #aaa;\n    border-bottom: none;\n  }\n"])),(function(e){return e.active?"white":"#DFDFDF"}),(function(e){return e.active?"4px solid white":"none"}),(function(e){return e.active?"#3d6079":"auto"})),Ce=i(426),Be=i(240),Ie=i(237),Ae=i(277),Fe=i(428),ze=i(435),Me=function(){return new Fe.a({data:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],maxRequests:20,pickable:!1,onViewportLoad:function(){return null},autoHighlight:!1,highlightColor:[60,60,60,40],minZoom:0,maxZoom:19,tileSize:512/devicePixelRatio,renderSubLayers:function(e){var t=e.tile.bbox,i=t.west,a=t.south,r=t.east,n=t.north;return[new ze.a(e,{data:null,image:e.data,bounds:[i,a,r,n]})]}})},Ve=Object(c.a)((function(){var e=ue(),t=e.analysisStore,i=e.mapStore,a=e.tracksStore,r=e.radarsStore;n.a.useEffect((function(){return e.isDrawerOpen=!1,i.viewportType="2D",i.areMapLayersInitialized=!1,a.clearTracks(),i.initializeLayers(),function(){a.clearTracks(),i.areMapLayersInitialized=!1}}),[e,i,a]);var s=[Me(),r.radarsLayer,r.radarsRadiusLayer];t.isLoaded&&(t.directionBuffers.length>0&&"Direction"===t.selectedParameter&&s.splice(1,0,t.directionLayer),t.densityColorAttributeBuffers.length>0&&"Density"===t.selectedParameter&&s.splice(1,0,t.binaryGridLayer));var o=new Be.a({directionalLight:new Ie.a({color:[255,255,255],intensity:2,direction:[1,-.5,1]}),ambientLight:new Ae.a({color:[255,255,255],intensity:.8})});return Object(Oe.jsx)(Ce.a,{initialViewState:i.getViewState(),views:[i.viewport],width:"100%",height:"100%",style:{position:"relative"},controller:!0,effects:[o],layers:s,_animate:!0,parameters:{clearColor:[.8,.9,1,1]},getTooltip:function(e){var t=e.object;return t&&t.id&&t.locations?{html:"<b>ID:</b> ".concat(t.id,"<br>\n                    <b>Latitude:</b> ").concat(t.locations[0][0].toFixed(5),"<br>\n                    <b>Longitude:</b> ").concat(t.locations[0][1].toFixed(5),"<br>\n                    <b>Elevation:</b> ").concat(t.locations[0][2].toFixed(2)," m"),style:{textAlign:"left"}}:t&&t.id&&t.location?{html:"<b>Name:</b> ".concat(t.id,"<br>\n                    <b>Latitude:</b> ").concat(t.location[0].toFixed(5),"<br>\n                    <b>Longitude:</b> ").concat(t.location[1].toFixed(5),"<br>\n                    <b>Alert Level:</b> ").concat(t.alertLevel),style:{textAlign:"left"}}:null}})})),Re=i(417),Ee=i(440),Ue=i(422),Ge=i(442),Ne=i(421),He=i(443),We=i(432),Xe=i(441),Ke=i(425),Ze=i(282),Je=i.n(Ze),qe=i(281),Ye=i.n(qe),Qe=i(284),$e=i.n(Qe),et=i(279),tt=i.n(et),it=i(283),at=i.n(it),rt=i(280),nt=i.n(rt),st=i(191),ot=i(291),ct=Object(c.a)((function(){var e=ue(),t=e.analysisStore,i=e.notificationsStore,r=n.a.useState(null),s=Object(a.a)(r,2),o=s[0],c=s[1],l=t.currentTimestepDate?Object(ot.a)(t.currentTimestepDate,"yyyy-MM-dd HH:mm:ss"):"Please select a time period",u=t.timestepsLength>0?t.timestepsLength-1:1;return Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsxs)(d.a,{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"0.5rem 0.5rem 0rem 0rem",p:1,style:{backgroundColor:"#F2F2F2"},children:[Object(Oe.jsx)(d.a,{px:.5,children:Object(Oe.jsxs)(Re.a,{variant:"outlined",size:"small",margin:"dense",children:[Object(Oe.jsx)(Ee.a,{id:"dataset-selection-label",children:"Dataset"}),Object(Oe.jsxs)(We.a,{id:"dataset-selection",labelId:"dataset-selection-label",label:"Dataset",fullWidth:!0,style:{backgroundColor:"#F8F8F8"},value:t.selectedSummaryID,onChange:function(e){var i=e.target.value;t.selectedSummaryID=i},children:[Object(Oe.jsx)(Xe.a,{value:"Hourly",children:"Hourly"}),Object(Oe.jsx)(Xe.a,{value:"Monthly",children:"Monthly"})]})]})}),Object(Oe.jsx)(d.a,{px:.5,children:Object(Oe.jsx)(Ke.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",id:"from-date-time",label:"From",inputVariant:"outlined",margin:"dense",size:"small",style:{backgroundColor:"#F8F8F8"},value:t.fromDate,onChange:function(e){e&&Object(st.a)(e)&&(t.fromDate=e)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(Oe.jsx)(d.a,{px:.5,children:Object(Oe.jsx)(Ke.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",id:"to-date-time",label:"To",inputVariant:"outlined",margin:"dense",size:"small",style:{backgroundColor:"#F8F8F8"},value:t.toDate,onChange:function(e){e&&Object(st.a)(e)&&(t.toDate=e)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(Oe.jsx)(d.a,{px:.5,children:Object(Oe.jsx)(be.a,{size:"medium",variant:"contained",color:"secondary",onClick:function(){if(t.currentTimestepIndex=0,t.pause(),t.fromDate>t.toDate)i.addAlert(new S("data-download","error",'"From" date must be before "To" date.',!0,5e3));else{var e=Object(ne.a)(t.toDate,-1);t.fromDate<e?i.addAlert(new S("data-download","error","Cannot download more than 1 month of data.",!0,5e3)):t.retrieveTimeSteps()}},children:"Download"})})]}),Object(Oe.jsx)(Ne.a,{}),Object(Oe.jsxs)(d.a,{flexGrow:1,p:1,display:"flex",flexDirection:"row",alignItems:"center",children:[Object(Oe.jsx)(d.a,{px:.5,children:Object(Oe.jsxs)(Ge.a,{children:[Object(Oe.jsx)(Ue.a,{value:"skip-to-start",onClick:function(){return t.skipToStart()},children:Object(Oe.jsx)(tt.a,{})}),Object(Oe.jsx)(Ue.a,{value:"step-backward",onClick:function(){return t.stepBackward()},children:Object(Oe.jsx)(nt.a,{})}),t.isPlaying?Object(Oe.jsx)(Ue.a,{value:"pause",onClick:function(){return t.pause()},children:Object(Oe.jsx)(Ye.a,{})}):Object(Oe.jsx)(Ue.a,{value:"play",onClick:function(){return t.play()},children:Object(Oe.jsx)(Je.a,{})}),Object(Oe.jsx)(Ue.a,{value:"step-forward",onClick:function(){return t.stepForward()},children:Object(Oe.jsx)(at.a,{})}),Object(Oe.jsx)(Ue.a,{value:"skip-to-end",onClick:function(){return t.skipToEnd()},children:Object(Oe.jsx)($e.a,{})})]})}),Object(Oe.jsxs)(d.a,{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center",alignItems:"center",px:1,children:[Object(Oe.jsx)(d.a,{children:Object(Oe.jsx)(ke.a,{children:l})}),Object(Oe.jsx)(d.a,{px:5,width:"calc(100% - 2rem)",children:Object(Oe.jsx)(He.a,{value:o||t.currentTimestepIndex,min:0,max:u,valueLabelDisplay:"off","aria-labelledby":"range-slider",onChange:function(e,i){c(null),t.currentTimestepIndex=i,t.pause(),t.renderDensityGridLayer(),t.renderDirectionLayer()}})})]})]})]})})),lt=(Object(_e.a)(Ke.a)(fe||(fe=Object(ye.a)(["\n  & .MuiOutlinedInput-adornedEnd {\n    padding-right: 0px;\n  }\n"]))),ct),dt=Object(c.a)((function(){var e=ue().analysisStore;return Object(Oe.jsx)(Oe.Fragment,{children:Object(Oe.jsx)(d.a,{width:"15ch",children:e.legendScale.map((function(e){return Object(Oe.jsxs)(d.a,{children:[Object(Oe.jsx)(d.a,{display:"inline-block",width:"0.8rem",height:"0.8rem",mr:1,style:{backgroundColor:e.color}}),Object(Oe.jsx)(ke.a,{variant:"overline",component:"span",children:e.label})]},e.label)}))})})})),ut=i(437),ht=i(434),ft=Object(c.a)((function(){var e=ue().notificationsStore,t=e.alert,i=(null===t||void 0===t?void 0:t.shouldAutoHide)?t.duration:null;return Object(Oe.jsx)(ut.a,{open:!!t&&!e.isSnackbarClosed,autoHideDuration:i,onClose:function(i,a){var r;return function(t,i){"clickaway"!==i&&t&&e.removeAlertAfterDelay(t,500)}(null!==(r=null===t||void 0===t?void 0:t.id)&&void 0!==r?r:null,a)},anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(Oe.jsx)(pt,{severity:null===t||void 0===t?void 0:t.alertType,onClose:function(){var i,a;(a=null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:null)&&e.removeAlertAfterDelay(a,500)},style:{position:"relative",transform:"translateY(50px)"},children:null===t||void 0===t?void 0:t.message})})})),pt=function(e){return Object(Oe.jsx)(ht.a,Object(g.a)({elevation:6,variant:"filled"},e))},mt=ft,vt=Object(c.a)((function(){var e=ue();return Object(Oe.jsxs)(d.a,{height:"100%",position:"relative",overflow:"hidden",children:[Object(Oe.jsx)(Ve,{}),Object(Oe.jsx)(yt,{children:Object(Oe.jsx)(lt,{})}),e.analysisStore.isLoaded&&Object(Oe.jsx)(gt,{children:Object(Oe.jsx)(dt,{})}),Object(Oe.jsx)(mt,{})]})})),yt=Object(_e.a)(d.a)(pe||(pe=Object(ye.a)(["\n  position: absolute;\n  left: 50%;\n  bottom: 1rem;\n  transform: translateX(-50%);\n  width: max(35vw, 650px);\n  box-shadow: 0px 0px 1px 1px #aaa;\n  background-color: white;\n  border-radius: 0.5rem;\n  border: 1px solid #bbb;\n"]))),gt=Object(_e.a)(d.a)(me||(me=Object(ye.a)(["\n  position: absolute;\n  left: 1rem;\n  top: 1rem;\n  box-shadow: 0px 0px 1px 1px #aaa;\n  background-color: white;\n  padding: 1rem 1rem 0.5rem 1rem;\n  border-radius: 0.5rem;\n  border: 1px solid #bbb;\n"]))),bt=h()({palette:{primary:{main:"#0D3958"},secondary:{main:"#3d6079"}}}),kt=Object(c.a)((function(){var e=null;switch(ue().currentPage){case"analysis":e=Object(Oe.jsx)(vt,{})}return Object(Oe.jsx)(l.a,{theme:bt,children:Object(Oe.jsx)(p.a,{utils:f.a,children:Object(Oe.jsxs)(d.a,{display:"flex",flexDirection:"column",zIndex:1,height:"100vh",children:[Object(Oe.jsx)(d.a,{zIndex:3,children:Object(Oe.jsx)(Se,{})}),Object(Oe.jsx)(d.a,{flexGrow:1,zIndex:2,children:e})]})})})})),Tt=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,446)).then((function(t){var i=t.getCLS,a=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;i(e),a(e),r(e),n(e),s(e)}))};function xt(){var e=n.a.useState(null),t=Object(a.a)(e,2),i=t[0],r=t[1],s=n.a.useState(null),o=Object(a.a)(s,2),c=o[0],l=o[1];return n.a.useEffect((function(){fetch("./config.json").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),n.a.useEffect((function(){i&&l(new le(i))}),[i]),c?Object(Oe.jsx)(n.a.StrictMode,{children:Object(Oe.jsx)(de.Provider,{value:c,children:Object(Oe.jsx)(kt,{})})}):null}o.a.render(Object(Oe.jsx)(xt,{}),document.getElementById("root")),Tt()}},[[363,1,2]]]);
//# sourceMappingURL=main.8b22d54c.chunk.js.map